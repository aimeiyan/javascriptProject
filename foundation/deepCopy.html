<!DOCTYPE html>
<html>
<head lang="en">
    <meta charset="UTF-8">
    <title>深拷贝和浅拷贝</title>
</head>
<body>
<p><a href="http://www.cnblogs.com/yichengbo/archive/2014/07/10/3835882.html">http://www.cnblogs.com/yichengbo/archive/2014/07/10/3835882.html</a>
</p>

<h2>一、数组的深浅拷贝</h2>

<p>在使用JavaScript对数组进行操作的时候，我们经常需要将数组进行备份，事实证明如果只是简单的将它赋予其他变量，那么我们只要更改其中的任何一个，然后其他的也会跟着改变，这就导致了问题的发生。</p>
<textarea style="width: 800px;height: 100px">
    var arr = ["One","Two","Three"];
    var arrto = arr;
    arrto[1] = "test";
    document.writeln("数组的原始值：" + arr + "<br/>");//Export:数组的原始值：One,test,Three
    document.writeln("数组的新值：" + arrto + "<br/>");//Export:数组的新值：One,test,Three
</textarea>

<p>像上面的这种直接赋值的方式就是浅拷贝，很多时候，这样并不是我们想要得到的结果，其实我们想要的是arr的值不变，不是吗？
</p>

<h2>二、对象的深浅拷贝</h2>
<script>
    //    深度拷贝方法一：js的slice函数

    var arr = ["One", "Two", "Three"];
    var arrtoo = arr.slice(0);
    arrtoo[1] = "set Map";
    document.writeln("数组的原始值：" + arr + "<br />");//Export:数组的原始值：One,Two,Three
    document.writeln("数组的新值：" + arrtoo + "<br />");//Export:数组的新值：One,set Map,Three


    //深度拷贝方法二：js的concat方法

    //    concat() 方法用于连接两个或多个数组。
    //    该方法不会改变现有的数组，而仅仅会返回被连接数组的一个副本。
    //    语法
    //    arrayObject.concat(arrayX,arrayX,......,arrayX)
    //    说明
    //    返回一个新的数组。该数组是通过把所有 arrayX 参数添加到 arrayObject 中生成的。如果要进行 concat() 操作的参数是数组，那么添加的是数组中的元素，而不是数组。

    var arr = ["One", "Two", "Three"];
    var arrtooo = arr.concat();
    arrtooo[1] = "set Map To";
    document.writeln("数组的原始值：" + arr + "<br />");//Export:数组的原始值：One,Two,Three
    document.writeln("数组的新值：" + arrtooo + "<br />");//Export:数组的新值：One,set Map To,Three


    //    二、对象的深浅拷贝
    var a = {name: 'yy', age: 26};
    var b = new Object();


    b.name = a.name;
    b.age = a.age;
    a.name = 'xx';
    console.log(b);//Object { name="yy", age=26}
    console.log(a);//Object { name="xx", age=26}


    var deepCopy = function (source) {
        var result = {};
        for (var key in source) {
            result[key] = typeof source[key] === 'Object' ? deepCopy(source[key]) : source[key];
        }
        return result;
    }

</script>
</body>
</html>